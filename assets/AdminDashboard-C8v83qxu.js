import{r as t,K as F,j as e,U as R,V as q,Y as D,_ as G,$ as k,o as S,a0 as P,a1 as V,X as H,a2 as J}from"./react-vendor-BsKB5qO5.js";import{u as K,a as Q,b as W,c as X,s as Y,i as Z,h as v,E as ee,L as se,d as ae,f as re}from"./index-Chwiv-Gp.js";import"./vendor-BcyfbpGg.js";import"./animation-vendor-DdGBw1fV.js";import"./supabase-vendor-B_pmqJd-.js";const te=(s,r=300)=>{const[n,u]=t.useState(s);return t.useEffect(()=>{const d=setTimeout(()=>{u(s)},r);return()=>{clearTimeout(d)}},[s,r]),n},N={nome:"",marca:"",armazenamento:"",memoria_ram:"",camera:"",bateria:"",cor:"",condicao:"Novo",situacao:"Normal",valor:"",imagem_url:""},le=({formData:s,onInputChange:r,onImageUpload:n,onSubmit:u,onClose:d,uploading:i,isSubmitting:x,isEditing:m})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-3 sm:p-4 lg:p-6 bg-black/80 backdrop-blur-sm overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-surface border border-white/10 rounded-xl sm:rounded-2xl p-4 sm:p-5 lg:p-6 w-full max-w-[calc(100vw-1.5rem)] sm:max-w-[calc(100vw-2rem)] lg:max-w-5xl xl:max-w-6xl shadow-2xl my-auto max-h-[calc(100vh-1.5rem)] sm:max-h-[calc(100vh-2rem)] lg:max-h-[85vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-5 lg:mb-6 sticky top-0 bg-dark-surface z-10 -mx-4 sm:-mx-5 lg:-mx-6 px-4 sm:px-5 lg:px-6 py-3 border-b border-white/10",children:[e.jsxs("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-white flex items-center gap-2",children:[m?e.jsx(P,{className:"text-primary",size:20}):e.jsx(k,{className:"text-primary",size:20}),e.jsx("span",{className:"truncate",children:m?"Editar Celular":"Novo Celular"})]}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white transition-colors flex-shrink-0 p-1 hover:bg-white/5 rounded-lg",type:"button","aria-label":"Fechar",children:e.jsx(H,{size:20,className:"sm:w-6 sm:h-6"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-5",children:[e.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:"Nome do Modelo"}),e.jsx("input",{name:"nome",value:s.nome,onChange:r,className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all",required:!0,placeholder:"Ex: iPhone 13 Pro Max"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:["Marca ",e.jsx("span",{className:"text-gray-600 text-xs",children:"(Opcional)"})]}),e.jsx("input",{name:"marca",value:s.marca,onChange:r,className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all",placeholder:"Ex: Apple"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:"Valor (R$)"}),e.jsx("input",{type:"number",name:"valor",value:s.valor,onChange:r,className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all",required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:["Armazenamento ",e.jsx("span",{className:"text-gray-600 text-xs",children:"(Opcional)"})]}),e.jsx("input",{name:"armazenamento",value:s.armazenamento,onChange:r,placeholder:"128GB",className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:["RAM ",e.jsx("span",{className:"text-gray-600 text-xs",children:"(Opcional)"})]}),e.jsx("input",{name:"memoria_ram",value:s.memoria_ram,onChange:r,placeholder:"4GB",className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:["Cor ",e.jsx("span",{className:"text-gray-600 text-xs",children:"(Opcional)"})]}),e.jsx("input",{name:"cor",value:s.cor,onChange:r,placeholder:"Ex: Preto",className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:["Câmera ",e.jsx("span",{className:"text-gray-600 text-xs",children:"(Opcional)"})]}),e.jsx("input",{name:"camera",value:s.camera,onChange:r,placeholder:"48MP",className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:["Bateria ",e.jsx("span",{className:"text-gray-600 text-xs",children:"(Opcional)"})]}),e.jsx("input",{name:"bateria",value:s.bateria,onChange:r,placeholder:"5000mAh",className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all"})]}),e.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:"Imagem do Produto"}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 bg-white/5 p-3 sm:p-4 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 bg-dark border border-white/10 rounded-lg overflow-hidden flex-shrink-0",children:[s.imagem_url?e.jsx("img",{src:s.imagem_url,alt:"Preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx(S,{size:24,className:"sm:w-7 sm:h-7"})}),i&&e.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-t-2 border-b-2 border-primary"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:n,className:`block w-full text-xs sm:text-sm text-gray-400
                                        file:mr-2 sm:file:mr-4 file:py-2 sm:file:py-2.5 file:px-3 sm:file:px-4
                                        file:rounded-lg file:border-0
                                        file:text-xs sm:file:text-sm file:font-semibold
                                        file:bg-primary file:text-dark
                                        hover:file:bg-primary-dark file:transition-colors
                                        cursor-pointer file:shadow-md`,disabled:i}),e.jsx("p",{className:"text-xs text-gray-500 mt-1.5 truncate",children:"JPG, PNG, WebP. Máximo 2MB."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:"Condição"}),e.jsxs("select",{name:"condicao",value:s.condicao,onChange:r,className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all cursor-pointer",children:[e.jsx("option",{value:"Novo",children:"Novo"}),e.jsx("option",{value:"Seminovo",children:"Seminovo"}),e.jsx("option",{value:"Usado",children:"Usado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-400 mb-1.5",children:"Situação"}),e.jsxs("select",{name:"situacao",value:s.situacao,onChange:r,className:"w-full bg-dark border border-white/10 rounded-lg p-2.5 sm:p-3 text-sm sm:text-base text-white focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all cursor-pointer",children:[e.jsx("option",{value:"Normal",children:"Normal  *não exibe tag* "}),e.jsx("option",{value:"Oferta",children:"Oferta"}),e.jsx("option",{value:"Lançamento",children:"Lançamento"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 mt-4 sm:mt-5 lg:mt-6 pt-4 sm:pt-5 border-t border-white/10 sticky bottom-0 bg-dark-surface -mx-4 sm:-mx-5 lg:-mx-6 px-4 sm:px-5 lg:px-6 pb-3",children:[e.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-5 sm:px-6 py-2.5 sm:py-3 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition-all font-medium border border-white/10",children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:i||x,className:"w-full sm:w-auto px-5 sm:px-6 py-2.5 sm:py-3 rounded-lg bg-primary hover:bg-primary-dark text-dark font-bold transition-all shadow-lg shadow-primary/20 hover:shadow-primary/40 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-primary/20",children:[e.jsx(J,{size:18,className:"sm:w-5 sm:h-5"}),i||x?"Enviando...":"Salvar"]})]})]})]})}),oe=({phone:s,onEdit:r,onDelete:n})=>e.jsxs("div",{className:"bg-dark-surface border border-white/10 rounded-xl overflow-hidden hover:border-primary/50 transition-all group",children:[e.jsxs("div",{className:"h-56 md:h-64 lg:h-72 bg-gray-800 relative overflow-hidden",children:[s.imagem_url?e.jsx("img",{src:s.imagem_url,alt:s.nome,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx(S,{size:40})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity z-10",children:[e.jsx("button",{onClick:()=>r(s),className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-lg",type:"button",children:e.jsx(P,{size:16})}),e.jsx("button",{onClick:()=>n(s.id),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-lg",type:"button",children:e.jsx(V,{size:16})})]}),s.situacao!=="Normal"&&e.jsx("span",{className:`absolute top-2 left-2 px-2 py-1 rounded text-xs font-bold text-white z-10 ${s.situacao==="Oferta"?"bg-red-500":"bg-blue-500"}`,children:s.situacao})]}),e.jsxs("div",{className:"p-3 md:p-4",children:[e.jsx("h3",{className:"font-bold text-base md:text-lg mb-1 truncate",children:s.nome}),e.jsx("p",{className:"text-primary font-bold text-lg md:text-xl mb-2 md:mb-3",children:re(s.valor)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-400",children:[s.armazenamento&&e.jsx("div",{className:"bg-white/5 p-1.5 rounded text-center",children:s.armazenamento}),s.memoria_ram&&e.jsx("div",{className:"bg-white/5 p-1.5 rounded text-center",children:s.memoria_ram}),e.jsx("div",{className:"bg-white/5 p-1.5 rounded text-center col-span-2",children:s.condicao})]})]})]}),xe=()=>{const s=F(),[r,n]=t.useState(!1),[u,d]=t.useState(!1),[i,x]=t.useState(null),[m,E]=t.useState(""),[g,b]=t.useState(N),{data:M,isLoading:_,isError:A,error:L}=K({limit:100}),p=Q(),h=W(),C=X(),f=te(m,300),y=M?.products||[],z=t.useMemo(()=>{if(!f)return y;const a=f.toLowerCase();return y.filter(l=>l.nome?.toLowerCase().includes(a)||l.marca?.toLowerCase().includes(a))},[y,f]),O=t.useCallback(async()=>{await Y.auth.signOut(),s("/admin/login")},[s]),T=t.useCallback(a=>{const{name:l,value:o}=a.target;b(c=>({...c,[l]:o}))},[]),U=t.useCallback(async a=>{const l=a.target.files?.[0];if(l)try{n(!0);const o=await Z.upload(l);b(c=>({...c,imagem_url:o}))}catch(o){const c=v(o,"AdminDashboard.handleImageUpload");alert(`Erro ao fazer upload: ${c.message}`)}finally{n(!1)}},[]),j=t.useCallback((a=null)=>{a?(x(a),b({nome:a.nome||"",marca:a.marca||"",armazenamento:a.armazenamento||"",memoria_ram:a.memoria_ram||"",camera:a.camera||"",bateria:a.bateria||"",cor:a.cor||"",condicao:a.condicao||"Novo",situacao:a.situacao||"Normal",valor:a.valor||"",imagem_url:a.imagem_url||""})):(x(null),b(N)),d(!0)},[]),w=t.useCallback(()=>{d(!1),x(null),b(N)},[]),B=t.useCallback(async a=>{a.preventDefault();try{const{id:l,created_at:o,...c}=g;i?await h.mutateAsync({id:i.id,data:c}):await p.mutateAsync(c),w()}catch(l){const o=v(l,"AdminDashboard.handleSubmit");alert(`Erro ao salvar: ${o.message}`)}},[g,i,p,h,w]),I=t.useCallback(async a=>{if(window.confirm("Tem certeza que deseja excluir este item?"))try{await C.mutateAsync(a)}catch(l){const o=v(l,"AdminDashboard.handleDelete");alert(`Erro ao excluir: ${o.message}`)}},[C]),$=p.isPending||h.isPending;return e.jsxs("div",{className:"min-h-screen bg-dark text-white font-body",children:[e.jsxs("header",{className:"bg-dark-surface border-b border-white/10 px-6 py-4 flex justify-between items-center sticky top-0 z-10 backdrop-blur-md bg-opacity-90",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"CF CELL Admin"}),e.jsx("span",{className:"bg-white/5 px-3 py-1 rounded-full text-xs text-gray-400 border border-white/10",children:"Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{to:"/",className:"flex items-center gap-2 text-gray-400 hover:text-primary transition-colors text-sm font-medium",children:[e.jsx(q,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Ir para o Site"})]}),e.jsxs("button",{onClick:O,className:"flex items-center gap-2 text-gray-400 hover:text-red-400 transition-colors text-sm font-medium",type:"button",children:[e.jsx(D,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Sair"})]})]})]}),e.jsxs("main",{className:"p-6 container mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar celular...",value:m,onChange:a=>E(a.target.value),className:"w-full bg-dark-surface border border-white/10 rounded-lg py-2 pl-10 pr-4 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all"})]}),e.jsxs("button",{onClick:()=>j(),className:"w-full md:w-auto bg-primary hover:bg-primary-dark text-dark font-bold px-6 py-2.5 rounded-lg flex items-center justify-center gap-2 transition-all shadow-lg shadow-primary/20 hover:shadow-primary/40",type:"button",children:[e.jsx(k,{size:20}),"Novo Celular"]})]}),A&&e.jsx(ee,{error:L,title:"Erro ao carregar dados",onRetry:()=>window.location.reload(),className:"mb-6"}),_?e.jsx(se,{size:"lg",className:"h-64"}):z.length===0?e.jsx(ae,{message:m?"Nenhum celular encontrado para esta busca.":"Nenhum celular encontrado.",description:m?"Tente buscar por outro termo.":"Adicione um novo item para começar.",action:!m&&e.jsxs("button",{onClick:()=>j(),className:"btn-primary",type:"button",children:[e.jsx(k,{size:20}),"Adicionar Primeiro Item"]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:z.map(a=>e.jsx(oe,{phone:a,onEdit:j,onDelete:I},a.id))})]}),u&&e.jsx(le,{formData:g,onInputChange:T,onImageUpload:U,onSubmit:B,onClose:w,uploading:r,isSubmitting:$,isEditing:!!i})]})};export{xe as default};
