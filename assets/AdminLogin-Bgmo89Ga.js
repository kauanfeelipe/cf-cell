import{r as t,K as k,j as e,n as A,T as E,l as S,U as C,V as L}from"./react-vendor-BsKB5qO5.js";import{s as p}from"./index-D6_P2-Jn.js";import"./vendor-BcyfbpGg.js";import"./animation-vendor-DdGBw1fV.js";import"./supabase-vendor-B_pmqJd-.js";const w=5,T=5*60*1e3,U=()=>{const[i,v]=t.useState(""),[n,y]=t.useState(""),[d,h]=t.useState(!1),[x,o]=t.useState(null),[f,u]=t.useState(0),[a,b]=t.useState(null),c=k();t.useEffect(()=>{(async()=>{const{data:{session:r}}=await p.auth.getSession();r?.user?.app_metadata?.role==="admin"&&c("/admin",{replace:!0})})()},[c]),t.useEffect(()=>{if(a){const s=setTimeout(()=>{b(null),u(0)},a-Date.now());return()=>clearTimeout(s)}},[a]);const g=t.useCallback(()=>!i||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)?(o("Por favor, insira um email válido"),!1):!n||n.length<6?(o("A senha deve ter pelo menos 6 caracteres"),!1):!0,[i,n]),j=t.useCallback(async s=>{if(s.preventDefault(),a&&Date.now()<a){const r=Math.ceil((a-Date.now())/1e3/60);o(`Muitas tentativas. Tente novamente em ${r} minutos.`);return}if(g()){h(!0),o(null);try{const{data:r,error:l}=await p.auth.signInWithPassword({email:i.trim().toLowerCase(),password:n});if(l)throw l;if(r?.user?.app_metadata?.role!=="admin")throw await p.auth.signOut(),new Error("Acesso não autorizado. Apenas administradores podem acessar.");u(0),c("/admin",{replace:!0})}catch(r){const l=f+1;if(u(l),l>=w)b(Date.now()+T),o("Conta bloqueada temporariamente por muitas tentativas. Tente novamente em 5 minutos.");else{const N=w-l;o(r.message==="Invalid login credentials"?`Credenciais inválidas. ${N} tentativas restantes.`:r.message)}}finally{h(!1)}}},[i,n,f,a,c,g]),m=a&&Date.now()<a;return e.jsx("div",{className:"min-h-screen bg-dark flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-dark-surface p-8 rounded-2xl border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Admin Access"}),e.jsx("p",{className:"text-gray-400",children:"Área restrita para administradores"})]}),x&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded-lg mb-6 text-sm flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:x})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{id:"email",type:"email",value:i,onChange:s=>v(s.target.value),className:"w-full bg-dark border border-white/10 rounded-lg py-3 pl-10 pr-4 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all",placeholder:"admin@cfcell.com",required:!0,disabled:d||m,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{id:"password",type:"password",value:n,onChange:s=>y(s.target.value),className:"w-full bg-dark border border-white/10 rounded-lg py-3 pl-10 pr-4 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all",placeholder:"••••••••",required:!0,disabled:d||m,autoComplete:"current-password",minLength:6})]})]}),e.jsx("button",{type:"submit",disabled:d||m,className:"w-full bg-primary hover:bg-primary-dark text-dark font-bold py-3 rounded-lg transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:d?"Entrando...":m?"Aguarde...":"Acessar Painel"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:e.jsxs(C,{to:"/",className:"flex items-center justify-center gap-2 w-full bg-white/5 hover:bg-white/10 text-white font-medium py-3 rounded-lg transition-all duration-300 border border-white/10 hover:border-primary/50",children:[e.jsx(L,{size:20}),"Ir para o Site"]})})]})})};export{U as default};
